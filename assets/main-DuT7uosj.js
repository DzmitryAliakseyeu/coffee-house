(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=t(o);fetch(o.href,c)}})();const Se=[{srcImg:"./contacts-info/pin-alt.svg",href:"https://maps.app.goo.gl/HcGzJkaL18asCgkq7",title:"pin-alt",content:"8558 Green Rd.,   LA",isLink:!0},{srcImg:"./contacts-info/phone.svg",href:"tel:+16035550123",title:"phone",content:"+1 (603)  555-0123",isLink:!0},{srcImg:"./contacts-info/clock.svg",href:"",title:"clock",content:"Mon-Sat: 9:00 AM – 23:00 PM",isLink:!1}];function xe(s){let e;const t=document.createElement("ul");t.classList.add("contacts-list"),s.append(t),Se.forEach(a=>{const o=document.createElement("li");o.classList.add("contact-info"),o.classList.add(a.title),t.append(o),a.isLink&&(e=document.createElement("a"),e.classList.add("contact-link"),o.append(e));const c=document.createElement("span");c.classList.add("contact-icon"),c.classList.add(`contact-${a.title}-icon`),a.isLink?e.append(c):o.append(c);const n=document.createElement("span");n.classList.add("link-and-button"),n.classList.add("text-light"),n.classList.add("contact-text"),n.classList.add(`contact-${a.title}-text`),n.textContent=a.content,a.isLink?(e.append(n),o.addEventListener("click",()=>{window.open(a.href,"_blank")})):o.append(n)})}function Ce(s){const e=document.createElement("div");e.classList.add("contacts-info"),s.append(e);const t=document.createElement("h2");t.classList.add("heading-3"),t.classList.add("text-light"),t.classList.add("contacts-info-title"),e.append(t),t.textContent="Contact us",xe(e)}const be=[{srcImg:"./socials/twitter.svg",src:"#",title:"twitter"},{srcImg:"./socials/instagram.svg",src:"#",title:"instagram"},{srcImg:"./socials/facebook.svg",src:"#",title:"facebook"}];function ke(s){const e=document.createElement("ul");e.classList.add("socials"),s.append(e),be.forEach(t=>{const a=document.createElement("li");a.classList.add("social"),a.classList.add(t.title),e.append(a);const o=document.createElement("a");o.classList.add("social-link"),a.append(o),o.href=t.src})}function Ee(s){const e=document.createElement("div");e.classList.add("offer-footer"),s.append(e);const t=document.createElement("h2");t.classList.add("heading-2"),t.classList.add("text-light"),t.classList.add("offer-footer-title"),e.append(t),t.innerHTML='Sip, Savor, Smile. <span class="text-accent">It’s coffee time!</span>',ke(e)}function jt(s){const e=document.createElement("footer");e.classList.add("footer"),s.append(e),e.id="contact-us";const t=document.createElement("section");t.classList.add("container-section"),t.classList.add("bgc-dark"),e.append(t),Ee(t),Ce(t)}function y({parent:s,className:e,action:t,text:a,hasIcon:o=!1,isHtml:c=!1}){const n=document.createElement("button");n.classList.add("button"),n.classList.add("link-and-button"),n.classList.add("text-dark"),n.classList.add(`button-${e}`),s.append(n),n.addEventListener("click",t);const i=document.createElement("span");if(i.classList.add(`button-${e}-text`),c?i.innerHTML=a:i.textContent=a,n.append(i),o){const r=document.createElement("span");r.classList.add(`button-${e}-icon`),n.append(r)}}function we(s){const e=document.createElement("nav");e.classList.add("navigation"),s.append(e);const t=document.createElement("ul");t.classList.add("navigation-list"),e.append(t),[{text:"Favorite coffee",href:"/coffee-house/index.html#favorite"},{text:"About",href:"/coffee-house/index.html#about"},{text:"Mobile app",href:"/coffee-house/index.html#mobile-app"},{text:"Contact us",href:"#contact-us"}].forEach(o=>{const c=document.createElement("li");c.classList.add("item");const n=document.createElement("a");n.classList.add("item-link"),n.classList.add("link-and-button"),n.classList.add("text-dark"),n.addEventListener("click",()=>{const i=document.querySelector(".navigation-box");if(i.classList.contains("open")){i.classList.remove("open"),document.documentElement.classList.remove("no-scroll");const r=document.querySelector(".button-burger"),p=document.querySelector(".button-burger-text");r.classList.remove("open"),p.classList.remove("open")}}),n.href=o.href,n.text=o.text,c.appendChild(n),t.appendChild(c)})}function Pe(){const s=document.querySelector(".navigation-box"),e=document.querySelector(".button-burger"),t=document.querySelector(".button-burger-text");if(!s||!e)return;s.classList.contains("open")?(s.classList.remove("open"),e.classList.remove("open"),document.documentElement.classList.remove("no-scroll"),t.classList.remove("open")):(s.classList.add("open"),e.classList.add("open"),document.documentElement.classList.add("no-scroll"),t.classList.add("open"))}function Ie(s){const e=document.createElement("div");e.classList.add("container-header"),s.append(e);const t=document.createElement("div");t.classList.add("header-menu"),e.append(t);const a=document.createElement("a");a.classList.add("logo"),t.append(a),a.href="/coffee-house/index.html";const o=document.createElement("img");o.classList.add("logo-img"),a.append(o),o.src="/coffee-house/logo.svg";const c=document.createElement("div");c.classList.add("navigation-box"),t.append(c),we(c);const n=document.createElement("div");n.classList.add("user-buttons-container"),c.append(n);const i=()=>{const d=c.querySelector(".button-menu");d&&d.remove();const g=c.querySelector(".button-cart");g&&g.remove();const f=c.querySelector(".button-profile");f&&f.remove();const u=JSON.parse(localStorage.getItem("orders")??"[]"),S=u?u.length:0;window.innerWidth<=768?(y({parent:c,className:"menu",action:()=>{window.open("/coffee-house/pages/menu.html","_self")},text:"Menu",hasIcon:!0}),y({parent:n,className:"profile",action:()=>{window.open("/coffee-house/pages/profile.html","_self")},text:'<p class="burger-link text-dark profile-title">Profile</p><span class="profile-icon"></span>',hasIcon:!1,isHtml:!0}),y({parent:n,className:"cart",action:()=>{window.open("/coffee-house/pages/cart.html","_self")},text:'<p class="burger-link text-dark cart-title">Cart</p><span class="cart-icon"></span>',hasIcon:!1,isHtml:!0})):(document.documentElement.classList.remove("no-scroll"),y({parent:n,className:"profile",action:()=>{window.open("/coffee-house/pages/profile.html","_self")},text:'<span class="profile-icon"></span> <p class="link-and-button text-dark profile-text"></p>',hasIcon:!1,isHtml:!0}),y({parent:n,className:"cart",action:()=>{window.open("/coffee-house/pages/cart.html","_self")},text:`<span class="cart-icon"></span> <p class="link-and-button text-dark cart-quantity">${S}</p>`,hasIcon:!1,isHtml:!0}),y({parent:c,className:"menu",action:()=>{window.open("/coffee-house/pages/menu.html","_self")},text:"Menu",hasIcon:!0}))};i(),window.addEventListener("resize",i);const r=document.querySelector(".button-cart-text");let p=JSON.parse(JSON.stringify(localStorage.getItem("signInUser"))),l=JSON.parse(JSON.stringify(localStorage.getItem("orders")));!sessionStorage.getItem("firstLoadDone")&&!p?(localStorage.clear(),sessionStorage.setItem("firstLoadDone","true"),r.classList.add("button-cart-text-hidden")):p||l?r.classList.remove("button-cart-text-hidden"):r.classList.add("button-cart-text-hidden"),y({parent:t,className:"burger",action:()=>{Pe()},text:'<span class="burger-line line-1"></span> <span  class="burger-line line-2"></span>',hasIcon:!1,isHtml:!0})}function qe(s){const e=document.createElement("section");e.classList.add("container-section"),s.append(e);const t=document.createElement("video");t.classList.add("video"),e.append(t),t.src="./video/coffee-house-video.mp4",t.autoplay=!0,t.muted=!0,t.loop=!0;const a=document.createElement("div");a.classList.add("offer"),e.append(a);const o=document.createElement("h1");o.classList.add("text-light"),o.classList.add("heading-1"),o.classList.add("offer-title"),a.append(o),o.innerHTML='<span class="text-accent">Enjoy</span> premium coffee at our charming cafe';const c=document.createElement("p");c.classList.add("offer-text"),c.classList.add("text-light"),c.classList.add("medium"),a.append(c),c.textContent="With its inviting atmosphere and delicious coffee options, the Coffee House Resource is a popular destination for coffee lovers and those seeking a warm and inviting space to enjoy their favorite beverage.",y({parent:a,className:"offer",action:()=>{window.open("/coffee-house/pages/menu.html","_self")},text:"Menu",hasIcon:!0})}function Rt(s,e=!0){const t=document.createElement("header");if(t.classList.add("header"),s.append(t),Ie(t),e){const a=document.createElement("section");a.classList.add("hero"),t.append(a),qe(a)}}function $e(s){return JSON.stringify({id:s.id,name:s.name,selectSize:s.selectSize,size:s.size,extras:[...s.extras].sort(),discountPrice:s.discountPrice,totlatPrice:s.totlatPrice,totalDiscountSum:s.totalDiscountSum,price:s.price})}function pe(){let s=JSON.parse(localStorage.getItem("orders")||"[]");const e=new Map;for(let t of s){let a=$e(t);e.has(a)?(e.get(a).quantity+=1,e.get(a).totalDiscountSum=e.get(a).singleProductDiscountSum*e.get(a).quantity,e.get(a).totlatPrice=e.get(a).singleProductTotalSum*e.get(a).quantity,e.get(a).hasPromoCode=!1,e.get(a).totlatPriceWithPromoCode=0,e.get(a).totalDiscountSumWithPromoCode=0):e.set(a,{...t,quantity:1,singleProductDiscountSum:t.totalDiscountSum,singleProductTotalSum:t.totlatPrice,hasPromoCode:!1,totlatPriceWithPromoCode:0,totalDiscountSumWithPromoCode:0})}return Array.from(e.values())}function Oe(s){const e=s.querySelector(".product-title"),a=s.querySelector(".product-extras").textContent.split(","),o=a[0],c=a.splice(1),n=document.querySelector(".cart-quantity"),i=document.querySelector(".order-total-info-text"),r=document.querySelector(".total-discount-price"),p=JSON.parse(localStorage.getItem("unionOrders")||"[]"),l=JSON.parse(localStorage.getItem("orders")||"[]");let d=p.filter(L=>!(L.name===e.textContent&&L.selectSize===o&&L.extras.join(",").trim()===c.join(",").trim()));localStorage.setItem("unionOrders",JSON.stringify(d));let g=d.reduce((L,v)=>L+v.quantity,0);n.textContent=String(g);let f=l.filter(L=>!(L.name===e.textContent&&L.selectSize===o&&L.extras.join(",").trim()===c.join(",").trim())),u=d.reduce((L,v)=>L+v.totlatPrice,0),S=d.filter(L=>L.totalDiscountSum>0).reduce((L,v)=>L+v.totalDiscountSum,0),k=d.filter(L=>L.totalDiscountSum===0).reduce((L,v)=>L+v.totlatPrice,0),x=S+k;i.textContent=`$${String(u.toFixed(2))}`,r&&(r.textContent=`$${String(x.toFixed(2))}`),localStorage.setItem("orders",JSON.stringify(f)),s.remove()}function Te(s,e){const t=document.createElement("div");t.classList.add("product-description"),s.append(t);const a=document.createElement("h3");a.classList.add("product-title"),a.classList.add("heading-3"),a.classList.add("text-dark"),t.append(a),a.textContent=e.name;const o=document.createElement("p");o.classList.add("product-extras"),o.classList.add("text-dark"),o.classList.add("medium"),t.append(o),o.textContent=`${e.selectSize}, ${e.extras.join(",")}`}function De(s,e){const t=document.createElement("div");t.classList.add("product-image-box"),s.append(t);const a=document.createElement("img");a.classList.add("product-image"),t.append(a),a.src=`../products/${e.name}.png`}function Be(s,e){const t=document.createElement("div");t.classList.add("product-price-block"),s.append(t);const a=document.createElement("h3");a.classList.add("product-price"),a.classList.add("heading-3"),a.classList.add("text-dark"),t.append(a),a.textContent=`$${e.totlatPrice.toFixed(2)}`;let o=localStorage.getItem("token");if(e.totalDiscountSum>0&&o){a.classList.add("unavaliable-price");const c=document.createElement("h3");c.classList.add("heading-3"),c.classList.add("text-dark"),c.classList.add("cart-card-price"),t.append(c),c.textContent=`$${e.totalDiscountSum.toFixed(2)}`}else a.classList.remove("unavaliable-price")}function fe(s){const e=s.querySelector(".product-title");s.querySelector(".product-price-block");const a=s.querySelector(".product-extras").textContent.split(","),o=a[0],c=a.splice(1),n=s.querySelector(".product-price"),i=s.querySelector(".cart-card-price"),r=document.querySelector(".cart-quantity"),p=document.querySelector(".order-total-info-text"),l=document.querySelector(".total-discount-price"),d=JSON.parse(localStorage.getItem("unionOrders")||"[]");if(d.forEach(f=>{f.name===e.textContent&&f.selectSize===o&&f.extras.join(",").trim()===c.join(",").trim()&&(n.textContent=`$${String(f.totlatPrice.toFixed(2))}`,i&&(f.hasPromoCode||(i.textContent=`$${String(f.totalDiscountSum.toFixed(2))}`),f.hasPromoCode&&(f.totalDiscountSumWithPromoCode>0?i.textContent=`$${String(f.totalDiscountSumWithPromoCode.toFixed(2))}`:i.textContent=`$${String(f.totlatPriceWithPromoCode.toFixed(2))}`)))}),d.findIndex(f=>f.hasPromoCode===!1)===-1){let f=d.filter(v=>v.totalDiscountSumWithPromoCode===0),u=d.filter(v=>v.totalDiscountSumWithPromoCode>0),S=f.reduce((v,P)=>v+P.totlatPriceWithPromoCode,0),k=u.reduce((v,P)=>v+P.totalDiscountSumWithPromoCode,0),x=S+k;l.textContent=`$${x.toFixed(2)}`;const L=d.reduce((v,P)=>v+P.quantity,0);r.textContent=String(L)}else{let f=d.reduce((L,v)=>L+v.totlatPrice,0),u=d.filter(L=>L.totalDiscountSum>0).reduce((L,v)=>L+v.totalDiscountSum,0),S=d.filter(L=>L.totalDiscountSum===0).reduce((L,v)=>L+v.totlatPrice,0),k=u+S;p.textContent=`$${String(f.toFixed(2))}`,l&&(l.textContent=`$${String(k.toFixed(2))}`);const x=d.reduce((L,v)=>L+v.quantity,0);r.textContent=String(x)}}function ge(s,e){const t=s.querySelector(".product-title"),o=s.querySelector(".product-extras").textContent.split(","),c=o[0],n=o.splice(1),i=s.querySelector(".product-quantity-text");let p=JSON.parse(localStorage.getItem("unionOrders")||"[]").map(d=>(d.name===t.textContent&&d.selectSize===c&&d.extras.join(",").trim()===n.join(",").trim()&&(d.quantity=+i.textContent,d.totlatPrice=d.quantity*d.singleProductTotalSum,d.totalDiscountSum=d.quantity*d.singleProductDiscountSum,d.hasPromoCode&&(d.totlatPriceWithPromoCode=d.quantity*d.singleProductTotalSum*.8,d.totalDiscountSumWithPromoCode=d.quantity*d.singleProductDiscountSum*.8)),d));localStorage.setItem("unionOrders",JSON.stringify(p));const l=JSON.parse(localStorage.getItem("orders")||"[]");if(e==="increase"){const d=l.find(g=>g.name===t.textContent&&g.selectSize===c&&g.extras.join(",").trim()===n.join(",").trim());d&&l.push({...d})}if(e==="decrease"){const d=l.findIndex(g=>g.name===t.textContent&&g.selectSize===c&&g.extras.join(",").trim()===n.join(",").trim());d!==-1&&l.splice(d,1)}localStorage.setItem("orders",JSON.stringify(l))}function Ae(s){const e=s.closest(".product-block"),t=e.querySelector(".product-quantity-text"),a=t.textContent;+a!=1&&(t.textContent=String(+a-1),ge(e,"decrease"),fe(e))}function ze(s){const e=s.closest(".product-block"),t=e.querySelector(".product-quantity-text"),a=t.textContent;t.textContent=String(+a+1),ge(e,"increase"),fe(e)}function Ne(s,e){const t=document.createElement("div");t.classList.add("product-quantity-block"),s.append(t),y({parent:t,className:"decrease-product",action:()=>Ae(t),text:"-",hasIcon:!1,isHtml:!1});const a=document.createElement("p");a.classList.add("product-quantity-text"),a.classList.add("text-dark"),a.classList.add("medium"),a.textContent=String(e),t.append(a),y({parent:t,className:"increase-product",action:()=>ze(t),text:"+",hasIcon:!1,isHtml:!1});const o=document.querySelector(".button-decrease-product-text"),c=document.querySelector(".button-increase-product-text");o.classList.add("text-dark"),c.classList.add("text-dark")}function Me(s,e){const t=document.createElement("div");t.classList.add("product-block"),t.id=e.id,s.append(t),y({parent:t,className:"remove-from-cart",action:()=>{Oe(t)},text:"",hasIcon:!0,isHtml:!1}),De(t,e),Te(t,e),Ne(t,e.quantity),Be(t,e)}function We(s){const e=document.createElement("div");e.classList.add("products-cart-container"),s.append(e);let t=pe();localStorage.setItem("unionOrders",JSON.stringify(t)),t.forEach(a=>{Me(e,a)})}function R(s){const e=document.querySelector(`${s}`);let t=e.firstElementChild;if(s===".modal"){const c=document.querySelector(".modal-card");c&&c.remove(),t=document.createElement("div"),t.classList.add("overlay"),e.append(t)}else if(s===".menu"){const c=document.querySelector(".menu-offer-tabs");c.style.display="none";const n=document.querySelector(".menu-products-grid");n.style.display="none"}else Array.from(t.children).forEach(c=>{c.style.display="none"});if(document.querySelector(".error"))return;const a=document.createElement("div");a.classList.add("error"),t?.append(a);const o=document.createElement("p");o.classList.add("error-text"),o.classList.add("heading-3"),o.classList.add("text-dark"),a.append(o),s===".menu"||s===".favorite"?o.textContent="Something went wrong. Please, refresh the page":o.textContent=" Something went wrong. Please, try again"}function U(s){const t=document.querySelector(`${s}`).firstElementChild,a=document.querySelector(".error");a&&(a.remove(),s===".menu"?(document.querySelector(".menu-offer-tabs").removeAttribute("style"),document.querySelector(".menu-products-grid").removeAttribute("style")):Array.from(t.children).forEach(o=>{o.removeAttribute("style")}))}function G(s){const e=document.querySelector(`${s}`);let t=e.firstElementChild;if(s===".modal"){const n=document.querySelector(".modal-card");n&&n.remove(),t=document.createElement("div"),t.classList.add("overlay"),e.append(t)}else if(s===".menu"){const n=document.querySelector(".menu-offer-tabs");n.style.display="none";const i=document.querySelector(".menu-products-grid");i.style.display="none"}else s===".modal-registration"||s===".modal-sign-in"||s===".modal-cart"?(t=document.createElement("div"),t.classList.add("overlay"),e.append(t)):Array.from(t.children).forEach(n=>{n.style.display="none"});if(document.querySelector(".loader"))return;const a=document.createElement("div");a.classList.add("loader"),t?.append(a);const o=document.createElement("p");o.classList.add("loader-text"),o.classList.add("heading-3"),o.classList.add("text-dark"),a.append(o),o.textContent="Loading...";const c=document.createElement("ul");c.classList.add("loader-images"),a.append(c);for(let n=0;n<3;n+=1){const i=document.createElement("li");i.classList.add("loader-image"),c.append(i)}}function w(s){let t=document.querySelector(`${s}`).firstElementChild;const a=document.querySelector(".loader");a&&(a.remove(),s===".modal"?(t=document.querySelector(".overlay"),t&&t.remove()):s===".menu"?(document.querySelector(".menu-offer-tabs").removeAttribute("style"),document.querySelector(".menu-products-grid").removeAttribute("style")):Array.from(t.children).forEach(o=>{o.removeAttribute("style")}))}async function He(s){let e=localStorage.getItem("token"),t=await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/orders/confirm",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(s)});if(!t.ok)throw new Error(`Server error: ${t.status}`);return await t.json()}async function Je(){const s=document.createElement("div");s.classList.add("modal-cart"),document.body.append(s),document.body.classList.add("no-scroll"),U(".modal-cart"),G(".modal-cart"),s.addEventListener("click",e=>{const t=s.querySelector(".overlay"),a=e.target;t.contains(a)||(document.body.classList.remove("no-scroll"),s.remove())});try{let e,t;if(e=JSON.parse(localStorage.getItem("unionOrders")??"[]"),t={items:e.map(o=>({productId:+o.id,size:o.size,additives:o.extras||[],quantity:o.quantity})),totalPrice:e.reduce((o,c)=>o+ +c.totlatPrice,0)},await He(t)){s.remove();let o=document.querySelector(".products-cart-container");o.innerHTML="";const c=document.createElement("h3");c.classList.add("heading-3"),c.classList.add("text-dark"),c.classList.add("succesfull-message"),o.append(c),c.textContent="Thank you for your order! Our manager will contact you shortly.";const n=document.querySelector(".order-total-info-text");let i=0;n.textContent=`$${i.toFixed(2)}`,n.classList.remove("unavaliable-price");let r=document.querySelector(".total-discount-price");n&&r.remove(),localStorage.removeItem("unionOrders");const p=document.querySelector(".cart-quantity");p.textContent="0",document.querySelector(".button-confirm")?.remove()}s.addEventListener("click",o=>{const c=s.querySelector(".modal-card"),n=o.target;c.contains(n)||s.remove()}),document.documentElement.classList.remove("no-scroll"),document.body.classList.remove("no-scroll")}catch{w(".modal-cart"),R(".modal-cart")}}function se(s){const e=document.createElement("div");e.classList.add("cart-buttons-block"),s.append(e);let t=localStorage.getItem("token"),a=JSON.parse(localStorage.getItem("orders")??"[]");t&&a&&a.length>0&&y({parent:e,className:"confirm",action:async()=>{Je()},text:"Confirm",hasIcon:!1,isHtml:!1}),t||(y({parent:e,className:"sign-in",action:()=>{window.open("/coffee-house/pages/sign-in.html","_self")},text:"Sign In",hasIcon:!1,isHtml:!1}),y({parent:e,className:"registration",action:()=>{window.open("/coffee-house/pages/registration.html","_self")},text:"Registration",hasIcon:!1,isHtml:!1}))}async function re(s){return await(await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/profile",{method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${s}`}})).json()}async function ae(s,e){let t=localStorage.getItem("token");const a=document.createElement("div");a.classList.add(`${e.toLowerCase().replace(/\s+/g,"-")}-block`),s.append(a);const o=document.createElement("h3");if(o.classList.add("order-info-title"),o.classList.add("heading-3"),o.classList.add("text-dark"),a.append(o),o.textContent=`${e}:`,e==="Total"){const n=document.createElement("div");n.classList.add("totla-price-block-cart"),a.append(n);const i=document.createElement("h3");i.classList.add("order-info-text"),i.classList.add(`order-${e.toLowerCase().replace(/\s+/g,"-")}-info-text`),i.classList.add("heading-3"),i.classList.add("text-dark"),n.append(i);let r=JSON.parse(localStorage.getItem("unionOrders")??"[]"),p=r.reduce((f,u)=>f+u.totlatPrice,0),l=r.reduce((f,u)=>f+u.totalDiscountSum,0),g=r.filter(f=>f.totalDiscountSum===0,0).reduce((f,u)=>f+u.totlatPrice,0);if(i.textContent=`$${p.toFixed(2)}`,l>0&&t){i.classList.add("unavaliable-price");const f=document.createElement("h3");f.classList.add("heading-3"),f.classList.add("text-dark"),f.classList.add("cart-card-price"),f.classList.add("total-discount-price"),n.append(f),f.textContent=`$${(l+g).toFixed(2)}`;return}}const c=document.createElement("h3");if(c.classList.add("order-info-text"),c.classList.add(`order-${e.toLowerCase().replace(/\s+/g,"-")}-info-text`),c.classList.add("heading-3"),c.classList.add("text-dark"),a.append(c),t){let n=await re(t);e==="Address"&&(c.textContent=`${n.data.city}, ${n.data.street}, ${n.data.houseNumber}`),e==="Pay by"&&(c.textContent=`${n.data.paymentMethod.charAt(0).toUpperCase()+n.data.paymentMethod.slice(1)}`)}}function oe(s){const e=document.createElement("div");e.classList.add("order-info"),s.append(e),ae(e,"Total"),localStorage.getItem("token")&&(ae(e,"Address"),ae(e,"Pay by"))}function Fe(s){s.querySelector(".button-apply-promo-code").setAttribute("disabled","");let t=JSON.parse(localStorage.getItem("unionOrders")||"[]");if(t.find(o=>!o.hasPromoCode)!==-1){const o=t.map(u=>(u.hasPromoCode=!0,u.totlatPriceWithPromoCode=u.totlatPrice*.8,u.totalDiscountSumWithPromoCode=u.totalDiscountSum*.8,u));localStorage.setItem("unionOrders",JSON.stringify(o));let c=JSON.parse(localStorage.getItem("unionOrders")||"[]");c.forEach(u=>{document.querySelectorAll(".product-block").forEach(k=>{const x=k.querySelector(".product-title"),v=k.querySelector(".product-extras").textContent.split(","),P=v[0],I=v.splice(1);if(u.name===x.textContent&&u.selectSize===P&&u.extras.join(",").trim()===I.join(",").trim()){const B=k.querySelector(".product-price-block"),q=k.querySelector(".product-price"),N=k.querySelector(".cart-card-price");if(N)N.textContent=`$${String(u.totalDiscountSumWithPromoCode.toFixed(2))}`;else if(u.totlatPriceWithPromoCode>0){q.classList.add("unavaliable-price");const z=document.createElement("h3");z.classList.add("heading-3"),z.classList.add("text-dark"),z.classList.add("cart-card-price"),B.append(z),z.textContent=`$${u.totlatPriceWithPromoCode.toFixed(2)}`}else q.classList.remove("unavaliable-price")}})});let n=c.reduce((u,S)=>u+S.totlatPrice,0),i=c.filter(u=>u.totalDiscountSumWithPromoCode===0),r=c.filter(u=>u.totalDiscountSumWithPromoCode>0),p=i.reduce((u,S)=>u+S.totlatPriceWithPromoCode,0),l=r.reduce((u,S)=>u+S.totalDiscountSumWithPromoCode,0),d=p+l;const g=document.querySelector(".order-total-info-text"),f=document.querySelector(".totla-price-block-cart");if(g.textContent=`$${n.toFixed(2)}`,d>0){g.classList.add("unavaliable-price");const u=document.createElement("h3");u.classList.add("heading-3"),u.classList.add("text-dark"),u.classList.add("cart-card-price"),u.classList.add("total-discount-price"),f.append(u),u.textContent=`$${d.toFixed(2)}`;return}}}function je(s){s.querySelector(".button-toggle-password-icon").classList.toggle("password-open");const t=s.closest(".input-block-password"),a=s.closest(".input-block-confirm-password"),c=(t??a).querySelector("input");c.type==="password"?c.type="text":c.type="password"}function Z(){const s=JSON.parse(localStorage.getItem("cardData")||"[]"),e=document.querySelector(".button-confirm");s.cardholderName!==""&&s.cardNumber!==""&&s.expires!==""&&s.cvv!==""?e.removeAttribute("disabled"):e.setAttribute("disabled","")}let h={login:"",password:"",confirmPassword:"",paymentMethod:"",address:{city:"",street:"",houseNumber:""}},T={login:"",paymentMethod:"",address:{city:"",street:"",houseNumber:""}},D={login:"",password:""};function de(s){if(s==="registrate"){const{login:a,password:o,address:c}=h;return a.trim()!==""&&o.trim()!==""&&c.city.trim()!==""&&c.street.trim()!==""&&c.houseNumber.trim()!==""&&+c.houseNumber.trim()>1}const{login:e,password:t}=D;return e.trim()!==""&&t.trim()!==""}function A(){const s=document.querySelector(".button-registration-request"),e=document.querySelector(".button-sign-in-request");if(s){s.disabled=!de("registrate");return}if(e){e.disabled=!de("sign-in");return}}function Re(s,e){const t=s.value.trim();return t!=="RS2025"&&t.length>0?(e.textContent="Promo code doesn't exist",!1):!0}function Ue(s,e){const t=s.value.trim();if(!t)return e.textContent="Cardholder name is required",!1;if(!/^[A-Za-z\s]+$/.test(t))return e.textContent="Name can contain only letters and spaces",!1;const a=t.split(/\s+/);return a.length<2?(e.textContent="Enter both first and last name",!1):a.some(o=>o.length<2)?(e.textContent="Each name part must be at least 2 letters",!1):t.length>50?(e.textContent="Name is too long",!1):(e.textContent="",!0)}function Ge(s,e){const t=s.value.replace(/\s+/g,"");return t?/^\d+$/.test(t)?t.length<16||t.length>16?(e.textContent="Card number must be 16 digits",!1):(e.textContent="",!0):(e.textContent="Card number can contain only digits",!1):(e.textContent="Card number is required",!1)}function _e(s,e){return s.value.trim()!==h.password?(e.textContent="Incorrect password",!1):!0}function Qe(s,e){const t=s.value.trim();return t?/^\d+$/.test(t)?t.length!==3?(e.textContent="CVV must be 3 digits",!1):(e.textContent="",!0):(e.textContent="CVV must contain only digits",!1):(e.textContent="CVV is required",!1)}function Ve(s,e){const a=s.value.trim().match(/^(\d{2})[\/\-]?(\d{2,4})$/);if(!a)return e.textContent="Invalid expiry format (MM/YY)",!1;let[,o,c]=a;const n=parseInt(o,10);let i=parseInt(c,10);if(n<1||n>12)return e.textContent="Invalid month",!1;if(i<100){const l=new Date().getFullYear(),d=Math.floor(l/100)*100;i+=d}return new Date(i,n,0,23,59,59)<new Date?(e.textContent="Card has expired",!1):(e.textContent="",!0)}function Ke(s,e){const t=s.value.trim();if(!t)return e.textContent="Fill field.",h.address.houseNumber="",!1;const a=Number(t);return isNaN(a)?(e.textContent="Must be a number.",!1):a<=1?(e.textContent="House number must be greater than 1.",!1):!0}function Xe(s,e){let t=s.value;return/^[A-Za-z]*$/.test(t)?t.length>0&&t.length<3?(e.textContent="Must be at least 3 characters long.",!1):t.length>0&&!/^[A-Za-z]/.test(t[0])?(e.textContent="Must start with a letter.",!1):!0:(e.textContent="Only English letters allowed.",!1)}function Ye(s,e){const t=s.value.trim();if(t.length>0&&t.length<6)return e.textContent="Must be at least 6 characters long.",!1;if(t.length>0&&!/[!@#$%^&*(),.?":{}|<>_\-+=~`[\]\\;'\/]/.test(t))return e.textContent="Must contain at least 1 special character.",!1;const a=document.getElementById("confirm-password");return a&&(a.disabled=!1),!0}let $={cardholderName:"",cardNumber:"",expires:"",cvv:""};function E(s,e,t,a,o,c=""){const n=document.createElement("div");n.classList.add("input-block"),n.classList.add(`input-block-${e}`),s.append(n);const i=document.createElement("label");i.classList.add("label"),i.classList.add("medium"),n.append(i),i.setAttribute("for",e),i.textContent=t;const r=document.createElement("input");r.classList.add("input-field"),r.classList.add("medium"),r.id=e,n.append(r),(r.id==="password"||r.id==="confirm-password")&&y({parent:i,className:"toggle-password",action:()=>{const l=i.querySelector(".button-toggle-password");je(l)},text:"",hasIcon:!0,isHtml:!1}),c&&(r.value=c,r.disabled=!0),t.toLowerCase()==="confirm password"&&(r.disabled=!0);const p=document.createElement("p");p.classList.add("input-error"),n.append(p),r.type=a,r.placeholder=o,r.addEventListener("blur",()=>{let l=!0;if(t==="Login")l=Xe(r,p);else if(t==="Password")l=Ye(r,p);else if(t.toLocaleLowerCase()==="confirm password")l=_e(r,p);else if(t.toLocaleLowerCase()==="house number")l=Ke(r,p);else if(t.toLocaleLowerCase()==="promo code"){const d=document.querySelector(".button-apply-promo-code");if(l=Re(r,p),d.removeAttribute("disabled"),l||d.setAttribute("disabled",""),r.value===""){r.classList.remove("valid"),r.classList.remove("invalid"),d.setAttribute("disabled","");return}}else t.toLocaleLowerCase()==="cardholder name:"?l=Ue(r,p):t.toLocaleLowerCase()==="card number:"?l=Ge(r,p):t.toLocaleLowerCase()==="expires:"?l=Ve(r,p):t.toLocaleLowerCase()==="cvv:"&&(l=Qe(r,p));l?l&&r.value?(r.classList.add("valid"),r.classList.remove("invalid"),p.style.color="transparent",t==="Login"&&(h.login=r.value,D.login=r.value),t==="Password"&&(h.password=r.value,D.password=r.value),t.toLocaleLowerCase()==="confirm password"&&(h.confirmPassword=r.value),t.toLocaleLowerCase()==="house number"&&(h.address.houseNumber=r.value),t.toLocaleLowerCase()==="cardholder name:"&&($.cardholderName=r.value,localStorage.setItem("cardData",JSON.stringify($)),Z()),t.toLocaleLowerCase()==="card number:"&&($.cardNumber=r.value,localStorage.setItem("cardData",JSON.stringify($)),Z()),t.toLocaleLowerCase()==="expires:"&&($.expires=r.value,localStorage.setItem("cardData",JSON.stringify($)),Z()),t.toLocaleLowerCase()==="cvv:"&&($.cvv=r.value,localStorage.setItem("cardData",JSON.stringify($)),Z())):r.value||(t==="Login"&&(h.login=r.value,D.login=r.value),t==="Password"&&(h.password=r.value,D.password=r.value),t.toLocaleLowerCase()==="confirm password"&&(h.confirmPassword=r.value),t.toLocaleLowerCase()==="house number"&&(h.address.houseNumber=r.value),t.toLocaleLowerCase()==="cardholder name:"&&($.cardholderName=""),t.toLocaleLowerCase()==="card number:"&&($.cardNumber=""),t.toLocaleLowerCase()==="expires:"&&($.expires=""),t.toLocaleLowerCase()==="cvv:"&&($.cvv="")):(r.classList.remove("valid"),r.classList.add("invalid"),p.style.color="red"),A()}),r.addEventListener("focus",()=>{r.classList.remove("invalid"),r.classList.remove("valid"),p.style.color="transparent"})}function le(s){const e=document.createElement("div");e?.classList.add("promo-code"),s.append(e),E(e,"promo-code-input","Promo Code","text","Our promo code RS2025"),y({parent:e,className:"apply-promo-code",action:()=>Fe(e),text:"Apply",hasIcon:!1,isHtml:!1});const t=document.createElement("p");t.classList.add("promo-text"),t.classList.add("text-dark"),t.classList.add("medium"),e.append(t),t.textContent="*Apply RS2025 promo code to get 20% sale";const a=document.querySelector(".button-apply-promo-code");a.disabled=!0}function Ze(s){const e=document.createElement("div");e.classList.add("card-form"),e.id="payment-data",s.append(e),E(e,"cardholder-name","Cardholder name:","text","Cardholder name"),E(e,"card-number","Card number:","text","Card number"),E(e,"expires","Expires:","text","Expires"),E(e,"cvv","CVV:","text","CVV")}function et(s){const e=document.createElement("div");e.classList.add("card-block"),s.append(e);const t=document.createElement("h3");t.classList.add("card-title"),t.classList.add("heading-3"),t.classList.add("text-dark"),e.append(t),t.textContent="Payment data";const a=document.createElement("div");a.classList.add("card-info-block"),e.append(a);const o=document.createElement("div");o.classList.add("card-image-block"),a.append(o),Ze(a)}async function tt(s){const e=document.createElement("section");e.classList.add("cart"),s.append(e);const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("cart-title"),a.classList.add("heading-2"),a.classList.add("text-dark"),a.textContent="Cart",t.append(a),We(t);let o=localStorage.getItem("token");if(o)try{if((await re(o)).data.paymentMethod==="card"){le(t),oe(t),et(t),se(t);const n=document.querySelector(".button-confirm");n&&n.setAttribute("disabled","")}else le(t),oe(t),se(t)}catch(c){console.error(c)}else oe(t),se(t)}const st=[{srcImg:"./menu/menu-offer-tabs/coffee.svg",src:"#",title:"Coffee"},{srcImg:"./menu/menu-offer-tabs/tea.svg",src:"#",title:"Tea"},{srcImg:"./menu/menu-offer-tabs/dessert.svg",src:"#",title:"Dessert"}];function Le(s,e){return e.filter(a=>a.category===s)}async function at(){return await(await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/products")).json()}async function ot(s){let e=await fetch(`https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/products/${s}`);if(!e.ok)throw new Error(`Server error: ${e.status}`);return e.json()}function nt(s){const e={...s};let t=localStorage.getItem("orders");const a=t?JSON.parse(t):[];a.push(e),localStorage.setItem("orders",JSON.stringify(a));let o=pe();localStorage.setItem("unionOrders",JSON.stringify(o))}function ee(s,e,t){const a=document.querySelector(".total-price"),o=document.querySelector(".total-price-block");if(!!e&&t>0)if(document.querySelector(".discount-card-price-modal")){document.querySelector(".discount-card-price-modal").textContent=`$${t}`;return}else{a.classList.add("unavaliable-price");const n=document.createElement("h3");n.classList.add("heading-3"),n.classList.add("text-dark"),n.classList.add("preview-card-price"),n.classList.add("discount-card-price-modal"),o.append(n),n.textContent=`$${t}`;return}else a.classList.remove("unavaliable-price"),document.querySelector(".discount-card-price-modal")&&document.querySelector(".discount-card-price-modal").remove()}let ct=[0],m={id:"",name:"",selectSize:"",size:"s",extras:[],discountPrice:0,price:{base:0,size:0,discount:0,additivies:[]},totlatPrice:0,totalDiscountSum:0};function it(s,e){const t=e,a=e.price;m.id=e.id,m.name=e.name,m.selectSize=e.sizes.s.size,m.price.base=Number(e.sizes.s.price),m.price.size=Number(e.sizes.s.price),m.price.discount=e.sizes.s.discountPrice?+e.sizes.s.discountPrice:0,m.price.additivies=[],m.extras=[],m.discountPrice=e.discountPrice?+e.discountPrice:0,m.totalDiscountSum=m.discountPrice&&m.discountPrice>0?+m.discountPrice:m.price.discount&&m.price.discount>0?+m.price.discount:0,m.totlatPrice=+m.price.base,document.addEventListener("keydown",I=>{(I.key==="Escape"||I.key==="Esc")&&(s.remove(),document.body.classList.remove("no-scroll"))});const o=document.createElement("div");o.classList.add("modal-card"),s.append(o),y({parent:o,className:"close-modal",action:()=>{s.remove(),document.body.classList.remove("no-scroll")},text:'<span class="close-modal-line line-1"></span> <span  class="close-modal-line line-2"></span>',hasIcon:!1,isHtml:!0});const c=document.createElement("div");c.classList.add("content-container"),o.append(c);const n=document.createElement("img");n.classList.add("img-card-block"),c.append(n),n.src=`../products/${t.name}.png`;const i=document.createElement("div");i.classList.add("content-card-block"),c.append(i);const r=document.createElement("div");r.classList.add("text-content-card-block"),i.append(r);const p=document.createElement("h3");p.classList.add("heading-3"),p.classList.add("text-dark"),p.classList.add("preview-card-title"),r.append(p),p.textContent=t.name;const l=document.createElement("p");l.classList.add("medium"),l.classList.add("text-dark"),l.classList.add("preview-card-description"),r.append(l),l.textContent=t.description;for(let I=0;I<2;I++){const B=document.createElement("div");B.classList.add("type-of-buttons"),i.append(B);const q=document.createElement("p");q.classList.add("medium"),q.classList.add("text-dark"),q.classList.add("text-type"),B.append(q);const N=document.createElement("ul");N.classList.add("card-offer-tabs"),B.append(N);let z;I===0?(q.textContent="Size",z=Object.entries(t.sizes).map(([C,M])=>({key:C.toUpperCase(),title:M.size,addPrice:M.price,field:"size",discount:M?.discountPrice??0}))):(q.textContent="Additives",z=t.additives.map((C,M)=>({key:M+1,title:C.name,addPrice:C.price,field:"additives",discount:0}))),z.forEach((C,M)=>{const b=document.createElement("li");b.classList.add("tab-item"),b.classList.add(`tab-${C.key}`),b.id=String(C.key),m.size="s",M===0&&typeof C.key=="string"&&b.classList.add("tab-active"),N.append(b);const W=document.createElement("div");W.classList.add("tooltip"),b.append(W),C.discount!==0&&localStorage.getItem("token")||b.id==="S"&&e.discountPrice&&localStorage.getItem("token")?C.discount!==0&&localStorage.getItem("token")?W.innerHTML=`<span class='add-price-not-relevant'>$${C.addPrice}</span> <span>$${C.discount}</span>`:W.innerHTML=`<span class='add-price-not-relevant'>$${C.addPrice}</span> <span>$${e.discountPrice}</span>`:W.innerHTML=`<span>$${C.addPrice}</span>`,b.addEventListener("mouseenter",()=>{W.classList.add("visible")}),b.addEventListener("mouseleave",()=>{W.classList.remove("visible")}),b.addEventListener("click",()=>{if(C.field==="size"){let J=JSON.parse(JSON.stringify(localStorage.getItem("signInUser")));const F=N.querySelector(".tab-active");F&&F!==b&&F.classList.remove("tab-active"),b.classList.contains("tab-active")||(b.classList.add("tab-active"),m.selectSize=C.title,m.size=String(b.id).toLowerCase(),m.price.size=+C.addPrice,m.price.discount=C.discount?+C.discount:0,b.id==="S"&&(m.price.size=+C.addPrice,m.price.discount=e.sizes.s.discountPrice&&+e.sizes.s.discountPrice>0&&e.discountPrice!==null?+e.sizes.s.discountPrice:+(e.discountPrice??0)),m.price.discount>0||(m.price.discount=0),ee(e,J,+m.price.discount))}if(C.field==="additives")if(b.classList.contains("tab-active")){b.classList.remove("tab-active"),m.extras=m.extras.filter(F=>F!==C.title);const J=m.price.additivies.indexOf(+C.addPrice);J!==-1&&m.price.additivies.splice(J,1)}else b.classList.add("tab-active"),m.extras.push(C.title),m.price.additivies.push(+C.addPrice);let H=m.price.additivies.reduce((J,F)=>J+F,0),Q=0,Y=localStorage.getItem("token");(!Y||m.discountPrice===0&&m.price.discount===0)&&(m.totalDiscountSum=0,Q=H+m.price.size),Y&&m.discountPrice>0&&m.price.discount===0&&(m.size==="s"?m.totalDiscountSum=H+m.discountPrice:m.totalDiscountSum=m.price.discount,Q=H+m.price.size),Y&&m.discountPrice===0&&m.price.discount>0&&(m.totalDiscountSum=H+m.price.discount,Q=H+m.price.size),Y&&m.discountPrice>0&&m.price.discount>0&&(m.totalDiscountSum=H+m.price.discount,Q=H+m.price.size),ee(e,S,m.totalDiscountSum),m.totlatPrice=Q,u.textContent=`$${Q.toFixed(2)}`});const X=document.createElement("a");X.classList.add("tab-link"),b.append(X);const V=document.createElement("span");V.classList.add("tab-icon"),V.classList.add("medium"),V.classList.add(`tab-${C.key}-icon-text`),V.textContent=String(C.key),X.append(V);const _=document.createElement("span");_.classList.add("link-and-button"),_.classList.add("text-dark"),_.classList.add("tab-text"),_.classList.add(`tab-${C.key}-text`),_.textContent=C.title,X.append(_)})}const d=document.createElement("div");d.classList.add("total"),i.append(d);const g=document.createElement("h3");g.classList.add("heading-3"),g.classList.add("text-dark"),g.classList.add("total-title"),d.append(g),g.textContent="Total:";const f=document.createElement("div");f.classList.add("total-price-block"),d.append(f);const u=document.createElement("h3");u.classList.add("heading-3"),u.classList.add("text-dark"),u.classList.add("total-price"),f.append(u);let S=JSON.parse(JSON.stringify(localStorage.getItem("signInUser")));m&&ee(e,S,m.totalDiscountSum);let x=+ct.reduce((I,B)=>I+B,0)+ +a;u.textContent=`$${x.toFixed(2)}`;const L=document.createElement("div");L.classList.add("alert"),i.append(L);const v=document.createElement("span");v.classList.add("alert-icon"),L.append(v);const P=document.createElement("p");P.classList.add("alert-text"),P.classList.add("caption"),L.append(P),P.textContent="The cost is not final. Download our mobile app to see the final price and place your order. Earn loyalty points and enjoy your favorite coffee with up to 20% discount.",y({parent:i,className:"add-to-cart",action:()=>{nt(m);const I=document.querySelector(".cart-quantity");let B=JSON.parse(localStorage.getItem("orders")??"[]");I.textContent=B.length;const q=document.querySelector(".button-cart-text-hidden");q&&q.classList.remove("button-cart-text-hidden"),document.querySelector(".modal").remove(),document.body.classList.remove("no-scroll")},text:"Add to cart"})}async function rt(s){const e=document.createElement("div");e.classList.add("modal"),document.body.append(e),document.body.classList.add("no-scroll"),U(".modal"),G(".modal"),e.addEventListener("click",t=>{const a=e.querySelector(".overlay"),o=t.target;a&&(a.contains(o)||(document.body.classList.remove("no-scroll"),e.remove()))});try{let a=(await ot(s)).data;setTimeout(()=>{w(".modal"),it(e,a)},1e3),e.addEventListener("click",o=>{const c=e.querySelector(".modal-card"),n=o.target;c.contains(n)||e.remove()})}catch{w(".modal"),R(".modal")}}function he({parent:s,id:e,srcImg:t,title:a,description:o,price:c,discountPrice:n}){const i=document.createElement("li");i.classList.add("preview-card"),s.append(i),i.id=String(e),i.addEventListener("click",x=>{let v=x.currentTarget.id;rt(v)});const r=document.createElement("div");r.classList.add("screen-card-block"),i.append(r);const p=document.createElement("img");p.classList.add("img-card-block"),i.append(p),p.src=t;const l=document.createElement("div");l.classList.add("content-card-block"),i.append(l);const d=document.createElement("div");d.classList.add("text-content-card-block"),l.append(d);const g=document.createElement("h3");g.classList.add("heading-3"),g.classList.add("text-dark"),g.classList.add("preview-card-title"),d.append(g),g.textContent=a;const f=document.createElement("p");f.classList.add("medium"),f.classList.add("text-dark"),f.classList.add("preview-card-description"),d.append(f),f.textContent=o;const u=document.createElement("div");u.classList.add("price-block"),l.append(u);const S=document.createElement("h3");S.classList.add("heading-3"),S.classList.add("text-dark"),S.classList.add("preview-card-price"),u.append(S),S.textContent=c;let k=JSON.parse(JSON.stringify(localStorage.getItem("signInUser")));if(n&&k){S.classList.add("unavaliable-price");const x=document.createElement("h3");x.classList.add("heading-3"),x.classList.add("text-dark"),x.classList.add("preview-card-price"),u.append(x),x.textContent=n}else S.classList.remove("unavaliable-price")}let ce,ie;async function dt(s){const e=document.createElement("ul");e.classList.add("menu-products-grid"),s.append(e);const t=document.querySelector(".tab-active");U(".menu"),G(".menu");try{ie=(await at()).data,setTimeout(()=>w(".menu"),1e3),ce=Le(t.id,ie),ce.forEach(o=>{he({parent:e,id:o.id,srcImg:`../products/${o.name}.png`,title:o.name,description:o.description,price:`$${o.price}`,...o.discountPrice?{discountPrice:`$${o.discountPrice}`}:{}})})}catch{w(".menu"),R(".menu")}}function lt(s){const e=document.createElement("ul");e.classList.add("menu-offer-tabs"),s.append(e),st.forEach((t,a)=>{const o=document.createElement("li");o.classList.add("tab-item"),o.classList.add(`tab-${t.title.toLowerCase()}`),o.id=t.title.toLowerCase(),a===0&&o.classList.add("tab-active"),o.addEventListener("click",()=>{const r=o.id;document.querySelector(".tab-active").classList.remove("tab-active"),document.getElementById(r).classList.add("tab-active");let d=Le(r,ie);const g=document.querySelector(".menu-products-grid"),f=document.querySelectorAll(".preview-card"),u=document.querySelector(".button-load");u.classList.remove("hidden"),f.forEach(x=>x.remove()),d.forEach(x=>{he({parent:g,id:x.id,srcImg:`../products/${x.name}.png`,title:x.name,description:x.description,price:`$${x.price}`,...x.discountPrice?{discountPrice:`$${x.discountPrice}`}:{}})});const S=document.querySelectorAll(".preview-card");Array.from(S).filter(x=>window.getComputedStyle(x).display==="none").length===0&&u.classList.add("hidden")}),e.append(o);const c=document.createElement("a");c.classList.add("tab-link"),o.append(c);const n=document.createElement("span");n.classList.add("tab-icon"),n.classList.add(`tab-${t.title.toLowerCase()}-icon`),c.append(n);const i=document.createElement("span");i.classList.add("link-and-button"),i.classList.add("text-dark"),i.classList.add("tab-text"),i.classList.add(`tab-${t.title.toLowerCase()}-text`),i.textContent=t.title,c.append(i)})}function ut(s){const e=document.createElement("div");e.classList.add("menu-offer-container"),s.append(e);const t=document.createElement("h2");t.classList.add("heading-2"),t.classList.add("text-dark"),t.classList.add("menu-offer-title"),e.append(t),t.innerHTML='Behind each of our cups hides an <span class="text-accent">amazing surprise</span>',lt(e)}function mt(s){const e=document.querySelectorAll(".preview-card");if(e.forEach(t=>t.style.display="flex"),e.length===s.length){document.querySelector(".button-load").classList.add("hidden");return}}function pt(s){const e=document.createElement("section");e.classList.add("menu"),s.append(e);const t=document.createElement("section");t.classList.add("container-section"),e.append(t),ut(t),dt(t),y({parent:t,className:"load",action:()=>{mt(ce)},text:"",hasIcon:!0})}function ft(){document.querySelectorAll(".edit-block").forEach(e=>{const t=e.querySelector("input"),a=T.paymentMethod[0].toUpperCase()+T.paymentMethod.slice(1),o=document.querySelector(`input[value=${a}`);if(o.checked=!0,!t)return;switch(t.id){case"login":t.value=T.login;break;case"city":t.value=T.address.city;break;case"street":t.value=T.address.street;break;case"house-number":t.value=T.address.houseNumber;break}})}function gt(){localStorage.getItem("token")&&localStorage.removeItem("token"),window.open("/coffee-house/index.html","_self")}function Lt(){document.querySelectorAll(".edit-block").forEach(e=>{const t=e.querySelector("input"),a=document.querySelector('input[name="pay-by"]:checked');if(!t)return;switch(a&&a.value.toLowerCase(),t.id){case"login":t.value;break;case"city":t.value;break;case"street":t.value;break;case"house-number":t.value;break}})}function ht(s){const e=document.createElement("div");e.classList.add("profile-buttons-block"),s.append(e),localStorage.getItem("token")?(y({parent:e,className:"save",action:()=>Lt(),text:"Save",hasIcon:!1,isHtml:!1}),y({parent:e,className:"cancel",action:()=>ft(),text:"Cancel",hasIcon:!1,isHtml:!1}),y({parent:e,className:"log-out",action:()=>gt(),text:"Log out",hasIcon:!1,isHtml:!1})):(y({parent:e,className:"sign-in",action:()=>{window.open("/coffee-house/pages/sign-in.html","_self")},text:"Sign In",hasIcon:!1,isHtml:!1}),y({parent:e,className:"registration",action:()=>{window.open("/coffee-house/pages/registration.html","_self")},text:"Registration",hasIcon:!1,isHtml:!1}))}function ve(s,e,t,a){const o=document.createElement("div");o.classList.add("input-radio"),o.classList.add(`input-radio-${e}`),s.append(o);const c=document.createElement("label");c.classList.add("label"),c.classList.add("medium"),c.textContent=t,o.append(c);const n=document.createElement("div");n.classList.add("radio-container"),o.append(n),a.forEach((i,r)=>{const p=document.createElement("label");p.classList.add("radio-option");const l=document.createElement("input");l.type="radio",l.name=e,l.value=i.value,r==0&&(l.checked=!0,h.paymentMethod=i.value.toLowerCase(),A(),l.dispatchEvent(new Event("change",{bubbles:!0})));const d=document.createElement("span");d.classList.add("custom-radio");const g=document.createElement("span");g.classList.add("radio-text"),g.classList.add("medium"),g.textContent=i.text,p.append(l,d,g),n.append(p),l.addEventListener("change",()=>{l.checked&&(h.paymentMethod=l.value.toLowerCase(),A())})})}async function vt(s){const e=document.createElement("div");e.classList.add("profile-data-grid"),s.append(e);let t=localStorage.getItem("token");if(t&&t){U(".profile"),G(".profile");try{let o=(await re(t)).data;T.login=o.login,T.address.city=o.city,T.address.street=o.street,T.address.houseNumber=o.houseNumber,T.paymentMethod=o.paymentMethod,setTimeout(()=>w(".profile"),1e3);for(let c=0;c<4;c+=1){const n=document.createElement("div");switch(n.classList.add("edit-block"),e.append(n),c){case 0:E(n,"login","Login","text","Placeholder",o.login);break;case 1:E(n,"city","City","text","Placeholder",o.city);break;case 2:E(n,"street","Street","text","Placeholder",o.street);break;case 3:E(n,"house-number","House number","text","Placeholder",o.houseNumber);break;default:break}y({parent:n,className:"edit",action:()=>{const i=n.querySelector("input");i&&(i.disabled=!i.disabled,A())},text:"",hasIcon:!0,isHtml:!1})}ve(e,"pay-by","Pay by",[{value:"Cash",text:"Cash"},{value:"Card",text:"Card"}])}catch{w(".profile"),R(".profile")}}}function yt(s){const e=document.createElement("section");e.classList.add("profile"),s.append(e);const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("profile-title"),a.classList.add("heading-2"),a.classList.add("text-dark"),a.textContent="Profile",t.append(a),vt(t),ht(t),A()}const j=[{city:"Warsaw",streets:["Nowy Świat","Marszałkowska","Puławska","Aleje Jerozolimskie","Mokotowska","Chmielna","Solidarności","Prosta","Tamka","Hoża"]},{city:"Krakow",streets:["Floriańska","Grodzka","Karmelicka","Dietla","Długa","Starowiślna","Lubicz","Szeroka","Kazimierza Wielkiego","Wielopole"]},{city:"Wroclaw",streets:["Świdnicka","Piłsudskiego","Grabiszyńska","Legnicka","Oławska","Krakowska","Księcia Witolda","Kościuszki","Traugutta","Sienkiewicza"]}];function ue(s,e,t,a){const o=document.createElement("div");o.classList.add("input-block",`input-block-${e}`),s.append(o);const c=document.createElement("label");c.classList.add("label","medium"),c.setAttribute("for",e),c.textContent=t,o.append(c);const n=document.createElement("input");n.type="text",n.id=e,n.setAttribute("autocomplete","o"),n.classList.add("input-field","medium"),n.placeholder=a,o.append(n);const i=document.createElement("div");i.classList.add("dropdown-list"),o.append(i);const r=document.getElementById("street");r&&(r.disabled=!0);function p(l,d=""){i.innerHTML="",l.filter(g=>g.toLowerCase().includes(d.toLowerCase())).forEach(g=>{const f=document.createElement("div");f.classList.add("dropdown-item"),f.textContent=g,f.addEventListener("click",()=>{if(n.value=g,i.classList.remove("show-list"),t.toLowerCase()==="city"){h.address.city=n.value,h.address.street="";const u=document.getElementById("street");u.value="",h.address.city&&(u.removeAttribute("disabled"),n.classList.remove("invalid"),n.classList.add("valid"))}t.toLowerCase()==="street"&&(h.address.street=n.value,h.address.street&&(n.classList.remove("invalid"),n.classList.add("valid")))}),i.append(f)})}return n.addEventListener("focus",()=>{if(n.classList.remove("invalid"),n.classList.remove("valid"),t.toLowerCase()==="city")p(j.map(l=>l.city));else if(t.toLowerCase()==="street"){const l=j.find(d=>d.city===h.address.city);p(l?l.streets:[])}i.classList.add("show-list")}),n.addEventListener("input",()=>{if(t.toLowerCase()==="city"){p(j.map(g=>g.city),n.value);let l=j.find(g=>n.value===g.city);const d=document.getElementById("street");d.classList.remove("valid"),!l||!n.value.trim()?(h.address.city="",d.value="",d.disabled=!0,n.classList.add("invalid"),n.classList.remove("valid")):(h.address.city=n.value,d.removeAttribute("disabled"),n.classList.remove("invalid"),n.classList.add("valid")),h.address.street="",d.value=""}else if(t.toLowerCase()==="street"){const l=j.find(g=>g.city===h.address.city);!l?.streets.find(g=>n.value===g)||!n.value.trim()?(h.address.street="",n.classList.add("invalid"),n.classList.remove("valid")):(h.address.street=n.value,n.classList.remove("invalid"),n.classList.add("valid")),p(l?l.streets:[],n.value)}A(),i.classList.add("show-list")}),n.addEventListener("blur",()=>{if(setTimeout(()=>i.classList.remove("show-list"),150),!n.value.trim()){n.classList.add("invalid"),n.classList.remove("valid"),A();return}t.toLowerCase()==="city"&&(j.some(d=>d.city===n.value)?(n.classList.add("valid"),n.classList.remove("invalid")):(n.classList.add("invalid"),n.classList.remove("valid"),h.address.city="")),t.toLowerCase()==="street"&&(j.find(g=>g.city===h.address.city)?.streets.includes(n.value)?(n.classList.add("valid"),n.classList.remove("invalid")):(n.classList.add("invalid"),n.classList.remove("valid"),h.address.street="")),A()}),n}function St(s){const e=document.createElement("div");e.classList.add("inputs-container"),s.append(e),E(e,"login","Login","text","Placeholder"),E(e,"password","Password","password","Placeholder"),E(e,"confirm-password","Confirm Password","password","Placeholder"),ue(e,"city","City","Placeholder"),ue(e,"street","Street","Placeholder"),E(e,"house-number","House number","text","Placeholder"),ve(e,"pay-by","Pay by",[{value:"Cash",text:"Cash"},{value:"Card",text:"Card"}]),A()}async function ye(){let s=await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:D.login,password:D.password})});if(!s.ok)throw new Error(`Server error: ${s.status}`);return await s.json()}async function xt(){let s=await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({login:h.login,password:h.password,confirmPassword:h.password,city:h.address.city,street:h.address.street,houseNumber:+h.address.houseNumber,paymentMethod:h.paymentMethod})});if(!s.ok)throw new Error(`Server error: ${s.status}`);return await s.json()}async function Ct(){const s=document.createElement("div");s.classList.add("modal-registration"),document.body.append(s),document.body.classList.add("no-scroll"),U(".modal-registration"),G(".modal-registration"),s.addEventListener("click",e=>{const t=s.querySelector(".overlay"),a=e.target;t.contains(a)||(document.body.classList.remove("no-scroll"),s.remove())});try{if(await xt()){D.login=h.login,D.password=h.password,localStorage.setItem("signInUser",JSON.stringify(D));let t=await ye();t&&(setTimeout(()=>w(".menu-registration"),1e3),window.open("/coffee-house/pages/menu.html","_self"),localStorage.setItem("logedUser",JSON.stringify(h)),localStorage.setItem("token",t.data.access_token))}s.addEventListener("click",t=>{const a=s.querySelector(".modal-card"),o=t.target;a.contains(o)||s.remove()})}catch{w(".modal-registration"),R(".modal-registration")}}function bt(s){const e=document.createElement("section");e.classList.add("registration"),s.append(e);const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("Registration-title"),a.classList.add("heading-2"),a.classList.add("text-dark"),a.textContent="Registration",t.append(a),St(t),y({parent:t,className:"registration-request",action:async()=>{Ct()},text:"Registration",hasIcon:!1});const o=document.querySelector(".button-registration-request");o.disabled=!0}async function kt(){const s=document.createElement("div");s.classList.add("modal-sign-in"),document.body.append(s),document.body.classList.add("no-scroll"),U(".modal-sign-in"),G(".modal-sign-in"),s.addEventListener("click",e=>{const t=s.querySelector(".overlay"),a=e.target;t.contains(a)||(document.body.classList.remove("no-scroll"),s.remove())});try{let e=await ye();localStorage.setItem("token",e.data.access_token),e&&(setTimeout(()=>w(".modal-sign-in"),1e3),window.open("/coffee-house/pages/menu.html","_self"),localStorage.setItem("signInUser",JSON.stringify(D))),s.addEventListener("click",t=>{const a=s.querySelector(".modal-card"),o=t.target;a.contains(o)||s.remove()})}catch{w(".modal-sign-in"),R(".modal-sign-in")}}function Et(s){const e=document.createElement("div");e.classList.add("inputs-container"),s.append(e),E(e,"login","Login","text","Placeholder"),E(e,"password","Password","password","Placeholder")}function wt(s){const e=document.createElement("section");e.classList.add("sign-in"),s.append(e);const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("sign-in-title"),a.classList.add("heading-2"),a.classList.add("text-dark"),a.textContent="Sign In",t.append(a),Et(t),y({parent:t,className:"sign-in-request",action:()=>{kt()},text:"Sign In",hasIcon:!1}),A()}const Pt=[{srcImg:"./gallery/about-1.png",alt:"about-1"},{srcImg:"./gallery/about-2.png",alt:"about-2"},{srcImg:"./gallery/about-3.png",alt:"about-3"},{srcImg:"./gallery/about-4.png",alt:"about-4"}];function It(s){const e=document.createElement("div");e.classList.add("gallery"),s.append(e);let t;Pt.forEach((a,o)=>{o%2===0&&(t=document.createElement("div"),t.classList.add("gallery-container"),t.classList.add(`gallery-container-${o}`),e.append(t));const c=document.createElement("div");c.classList.add("img-box"),t.append(c),c.style.backgroundImage=`url(${a.srcImg})`})}function qt(s){const e=document.createElement("section");e.classList.add("about"),s.append(e),e.id="about";const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("heading-2"),a.classList.add("text-dark"),a.classList.add("about-title"),t.append(a),a.innerHTML='Resource is  <span class="text-accent">the perfect and cozy place</span> where you can enjoy a variety of hot beverages, relax, catch up with friends, or get some work done.',It(t)}function K(s){const e=document.querySelectorAll(".controller");e.forEach((t,a)=>{a!==s&&t.classList.remove("controller-active"),requestAnimationFrame(()=>{e[s].classList.add("controller-active")})})}const $t=[{name:"../../../../../../public/slider/coffee-slider-1.png",slideTitle:"S’mores Frappuccino",description:"This new drink takes an espresso and mixes it with brown sugar and cinnamon before being topped with oat milk.",price:"$5.50"},{name:"../../../../../../public/slider/coffee-slider-2.png",slideTitle:"Caramel Macchiato",description:"Fragrant and unique classic espresso with rich caramel-peanut syrup, with cream under whipped thick foam.",price:"$5.00"},{name:"../../../../../../public/slider/coffee-slider-3.png",slideTitle:"Ice coffee",description:"A popular summer drink that tones and invigorates. Prepared from coffee, milk and ice.",price:"$4.50"}];function Ot(s){const e=document.createElement("ul");e.classList.add("controls"),s.append(e),$t.forEach((t,a)=>{const o=document.createElement("li");o.classList.add("controller"),o.id=`controller-${a}`,e.append(o)})}function te(s){const e=document.querySelector(".row-slider");e&&(e.style.transform=`translateX(-${s*100}%)`)}function me(s){let e=s-1;return e<0?(s=2,te(s),K(s),s):(te(e),s=e,K(s),s)}function ne(s){let e=s+1;return e>2?(s=0,te(s),K(s),s):(te(e),s=e,K(s),s)}async function Tt(){let s=await fetch("https://6kt29kkeub.execute-api.eu-central-1.amazonaws.com/products/favorites");if(!s.ok)throw new Error(`Server error: ${s.status}`);return await s.json()}function Dt(s,e){const t=document.createElement("div");t.classList.add("content"),s.append(t);const a=document.createElement("div");a.classList.add("image-box"),t.append(a);const o=document.createElement("img");o.classList.add("image"),a.append(o),o.src=`./slider/${e.name}.png`;const c=document.createElement("div");c.classList.add("slider-info"),t.append(c);const n=document.createElement("h3");n.classList.add("heading-3"),n.classList.add("text-dark"),n.classList.add("slide-title"),n.textContent=e.name,c.append(n);const i=document.createElement("p");i.classList.add("medium"),i.classList.add("text-dark"),i.classList.add("slide-description"),i.textContent=e.description,c.append(i);const r=document.createElement("h3");r.classList.add("heading-3"),r.classList.add("text-dark"),r.classList.add("slide-price"),r.textContent=`$${e.price}`,c.append(r)}async function Bt(s){const e=document.createElement("div");e.classList.add("row-slider"),s.append(e);let t=[];U(".favorite"),G(".favorite");try{t=(await Tt()).data,setTimeout(()=>w(".favorite"),1e3),t.forEach(o=>{Dt(e,o)})}catch{t=[],w(".favorite"),R(".favorite")}}function At(s){const e=document.createElement("div");e.classList.add("slider-track"),s.append(e),Bt(e)}let O=0;function zt(s){let e,t=5e3,a,o=!1,c=0,n=0;const i=document.createElement("div");i.classList.add("slider"),s.append(i),y({parent:i,className:"slider-left",action:()=>{O=me(O),p()},text:"",hasIcon:!0}),At(i),y({parent:i,className:"slider-right",action:()=>{O=ne(O),p()},text:"",hasIcon:!0});function r(){return a=Date.now(),setTimeout(()=>{O=ne(O),p()},t)}function p(){clearTimeout(e),t=5e3,e=r()}function l(){if(o)return;o=!0,clearTimeout(e);const u=Date.now()-a;t-=u,g()}function d(){o&&(o=!1,e=r(),f())}function g(){const u=document.querySelector(".controller.controller-active::after");u&&(u.style.animationPlayState="paused")}function f(){const u=document.querySelector(".controller.controller-active::after");u&&(u.style.animationPlayState="running")}i.addEventListener("mouseenter",l),i.addEventListener("mouseleave",d),i.addEventListener("touchstart",u=>{l(),c=u.touches[0].clientX},{passive:!0}),i.addEventListener("touchend",u=>{n=u.changedTouches[0].clientX;const S=n-c,k=50;S>k?(O=me(O),p()):S<-k&&(O=ne(O),p()),d()},{passive:!0}),i.addEventListener("touchcancel",d,{passive:!0}),e=r()}function Nt(s){const e=document.createElement("div");e.classList.add("slider-container"),s.append(e),zt(e),Ot(e),K(O)}function Mt(s){const e=document.createElement("section");e.classList.add("favorite"),s.append(e),e.id="favorite";const t=document.createElement("section");t.classList.add("container-section"),e.append(t);const a=document.createElement("h2");a.classList.add("heading-2"),a.classList.add("text-dark"),a.classList.add("favorite-title"),t.append(a),a.innerHTML='Choose your <span class="text-accent">favorite</span> coffee',Nt(t)}function Wt(s){const e=document.createElement("div");e.classList.add("mobile"),s.append(e);const t=document.createElement("img");t.classList.add("mobile-screens"),e.append(t),t.alt="mobile-screens",t.src="./mobile-app/mobile-screens.png"}function Ht(s){const e=document.createElement("div");e.classList.add("offer-ma-buttons"),s.append(e),y({parent:e,className:"offer-ma-app-store",action:()=>console.log("click"),text:'<span class="caption text-dark">Available on the</span><span class="link-and-button text-dark">App Store</span>',hasIcon:!0,isHtml:!0}),y({parent:e,className:"offer-ma-google-play",action:()=>console.log("click"),text:'<span class="caption text-dark">Available on</span><span class="link-and-button text-dark">Google Play</span>',hasIcon:!0,isHtml:!0})}function Jt(s){const e=document.createElement("div");e.classList.add("offer-mobile-app"),s.append(e);const t=document.createElement("h2");t.classList.add("heading-2"),t.classList.add("text-dark"),t.classList.add("offer-ma-title"),e.append(t),t.innerHTML='<span class="text-accent">Download</span> our apps to start ordering';const a=document.createElement("p");a.classList.add("medium"),a.classList.add("text-dark"),a.classList.add("offer-text"),a.innerHTML="Download the Resource app today and experience the comfort of ordering your favorite coffee from wherever you are",e.append(a),Ht(e)}function Ft(s){const e=document.createElement("section");e.classList.add("mobile-app"),s.append(e),e.id="mobile-app";const t=document.createElement("section");t.classList.add("container-section"),e.append(t),Jt(t),Wt(t)}function Ut(s,e=!0,t=!1,a=!1,o=!1,c=!1,n=!1){const i=document.createElement("main");i.classList.add("main"),s.append(i),e?(Mt(i),qt(i),Ft(i)):t?pt(i):a?tt(i):o?wt(i):c?bt(i):n&&yt(i)}export{Ut as a,jt as b,Rt as c};
